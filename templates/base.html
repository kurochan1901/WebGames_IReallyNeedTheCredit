<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WebGames</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='app.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='auth.css') }}">

  {% block extra_style %}
  <!-- 可以為不同頁面提供額外樣式 -->
  {% endblock %}

</head>
<body>
  <header class="nav">
    
    <div class="user-info" id="user-info">
      {% if session.get('player_id') %}
        <span>{{ session.get('username') }}</span>
        <button onclick="togglePopup()">顯示資料</button>
      {% else %}
        <button onclick="togglePopup()">請先登入</button>
      {% endif %}
    </div>
  
  </header>

  {% with msgs = get_flashed_messages(with_categories=true) %}
  {% if msgs %}
    <ul id="flash">
      {% for cat, m in msgs %}
        <li data-cat="{{ cat }}">{{ m }}</li>
      {% endfor %}
    </ul>
    <script>
      // 若是「查無帳號」類型，彈窗提醒
      (function(){
        var liNo = document.querySelector('#flash li[data-cat="no_account"]');
        if(liNo){ 
          alert(li.textContent)
          window.location.href = "{{ url_for('register_form') }}";
          return;
        }
      })();
    </script>
  {% endif %}
  {% endwith %}

  <main>
    {% block content %}{% endblock %}
  </main>
</body>
</html>