<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WebGames</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='app.css') }}">
</head>
<body>
  <header class="nav">
    <a href="{{ url_for('home') }}">首頁</a>
    {% if session.get('player_id') %}
      <form method="post" action="{{ url_for('logout') }}" style="display:inline">
        <button>登出（{{ session.get('username') }}）</button>
      </form>
    {% else %}
      <a href="{{ url_for('login_form') }}">登入</a>
      <a href="{{ url_for('register_form') }}">註冊</a>
    {% endif %}
  </header>

  {% with msgs = get_flashed_messages(with_categories=true) %}
  {% if msgs %}
    <ul id="flash">
      {% for cat, m in msgs %}
        <li data-cat="{{ cat }}">{{ m }}</li>
      {% endfor %}
    </ul>
    <script>
      // 若是「查無帳號」類型，彈窗提醒
      (function(){
        var li = document.querySelector('#flash li[data-cat="no_account"]');
        if(li){ alert(li.textContent + "\\n點選「前往註冊」開始建立帳號。"); }
      })();
    </script>
  {% endif %}
  {% endwith %}

  <main>
    {% block content %}{% endblock %}
  </main>
</body>
</html>